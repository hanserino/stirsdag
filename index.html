<!DOCTYPE html>
<html>

    <head>
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-107726023-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'UA-107726023-1');
        </script>

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>Stirsdag - run sti get high!</title>
        <meta property="og:site_name" content="Stirsdag" />
        <meta property="og:title" content="Stirsdag - Run sti get high!" />
        <meta property="og:description" content="Stirsdag med Sky Blazers. 12-16km stiløping hver tirsdag kl 18:00 fra Disen trikkestasjon."
        />
        <meta property="og:image" content="media/headerPics/10.jpg">
        <meta property="og:url" content="http://stirsdag.no/">

        <script src='https://api.mapbox.com/mapbox-gl-js/v0.40.0/mapbox-gl.js'></script>
        <script src="./moment.js" type="text/javascript"></script>
        <script src="./blazing.js" type="text/javascript"></script>

        <link href="https://fonts.googleapis.com/css?family=Bungee+Shade" rel="stylesheet">
        <link rel="stylesheet" href="./stylesheet.css" type="text/css">

        <link href='https://api.mapbox.com/mapbox-gl-js/v0.40.0/mapbox-gl.css' rel='stylesheet' />

        <style>
            #map {
                border: 2px solid black;
                position: absolute;
                top: 0;
                left: 0;
                bottom: 0;
                width: 100%;
            }

            .mapboxgl-popup {
                max-width: 400px;
                z-index: 4;
            }
        </style>

    </head>

    <body>
        <main class="wrapper">

            <header class="section textOnPic" id="header" data-stirsdag="">
                <h1 id="isitQuestion">Er det Stirsdag idag?</h1>
                <p id="isitAnswer"></p>

                <nav class="nav">
                    <ul>
                        <li>
                            <a href="#hva-er-stirsdag">Hva er Stirsdag?</a>
                        </li>
                        <li>
                            <a href="#loypa">Hvor løper vi?</a>
                        </li>
                        <li>
                            <a href="#utstyr">Vær og utstyr</a>
                        </li>
                        <li>
                            <a href="#quotes">Hørt på Stirsdag</a>
                        </li>
                        <li>
                            <a href="#hvem-staar-bak">Hvem står bak?</a>
                        </li>
                    </ul>
                </nav>
            </header>

            <section class="section animBg" id="hva-er-stirsdag">
                <div class="section__inner">
                    <h1>Hva er Stirsdag?</h1>
                    <p>Kort oppsummert er Stirsdag tirsdagstreninga til
                        <a href="#hvem-staar-bak">Sky Blazers</a> hvor alle er velkomne. Vi møtes ved trikkestoppet på Disen, tirsdager kl. 18:00 og
                        løper opp Grefsenkollen og videre inn i marka før vi ender opp på trikkestasjonen på Kjelsås. </p>
                    <p>Etterpå tar vi trikken nedover mot Løkka hvor vi tar en matbit og en øl/brus. Høres det fett ut, så bli
                        med! </p>
                    <p>Fortsatt ikke 100% solgt? Hr. Rummelhoff har forfattet en litt mer
                        <a href="https://www.strava.com/athletes/4595507/posts/677173">utdypende tekst om Stirsdag her.</a>
                    </p>
                </div>
            </section>

            <section class="section" id="loypa">
                <div class="section__inner">
                    <h1>Løypa</h1>
                    <div id="map"></div>
                </div>
            </section>

            <section class="section animBg" id="utstyr">
                <div class="section__inner">
                    <h1>Vær og utstyr</h1>
                    <p id="weatherText"></p>

                    <table id="gearTable">
                        <tr>
                            <th>Plagg/utstyr</th>
                            <th>God idé?</th>
                        </tr>
                        <tbody id="gearTableBody"></tbody>
                    </table>
                </div>
            </section>

            <section class="section animBg" id="hvem-staar-bak">
                <div class="section__inner">
                    <h1>Hvem står bak Stirsdag?</h1>
                    <p>Stirsdag er et initiativ av løpecrewet Sky Blazers. Vi består av ca 10stk kvinner og menn som rett og
                        slett elsker å løpe og konkurrere i røfft terreng. Flesteparten av oss holder til i Oslo-området.
                        "Sky" kommer av at vi digger
                        <a href="https://en.wikipedia.org/wiki/Skyrunning">skyrunning</a>. "Less cloud, more sky!", som de sier på fagspråket.</p>
                    <p>Du finner oss i disse kanalene:</p>
                    <ul>
                        <li>Facebook:
                            <a href="https://www.facebook.com/skyblazersrunning/">@skyblazersrunning</a>
                        </li>
                        <li>Instagram:
                            <a href="https://www.instagram.com/skyblazersrunning/">@skyblazersrunning</a>
                        </li>
                        <li>Strava:
                            <a href="https://www.strava.com/clubs/skyblazers">@skyblazers</a>
                        </li>
                        <li>Medium:
                            <a href="https://medium.com/skyblazers">@skyblazers</a>
                        </li>
                    </ul>
                </div>
            </section>

            <section class="section animBg" id="quotes">
                <div class="section__inner">
                    <h1>Hørt på Stirsdag</h1>
                    <p class="mobileOnly">Ser du deg selv? Trykk på bildet, ta screenshot og del med venner!</p>
                    <ul class="quote-list">
                        <li>
                            <img src="./media/profiles/cropped/bjornar.jpg" alt="Bjørnar" />
                            <div>
                                <blockquote>Stirsdag er den nye lørdag!</blockquote>
                                <span>- Bjørnar, Stirsdag 23.06.2017</span>
                            </div>
                        </li>
                        <li>
                            <img src="./media/profiles/cropped/markus.jpg" alt="Markus" />
                            <div>
                                <blockquote>Det dumme med Stirsdag er at man ser så jævla treig ut på Strava.</blockquote>
                                <span>- Markus, Stirsdag 11.10.2017</span>
                            </div>
                        </li>
                        <li>
                            <img src="./media/profiles/cropped/hk.jpg" alt="Hans Kristian" />
                            <div>
                                <blockquote>Stirsdag er som Fight Club, bare uten slåssinga.</blockquote>
                                <span>- Hans Kristian, Stirsdag 05.10.2017</span>
                            </div>
                        </li>
                        <li>
                            <img src="./media/profiles/cropped/phuong.jpg" alt="Phuong" />
                            <div>
                                <blockquote>Jeg er bare her for øl og burger</blockquote>
                                <span>- Phuong, Stirsdag 08.08.2017</span>
                            </div>
                        </li>
                        <li>
                            <img src="./media/profiles/cropped/steino.jpg" alt="Stein Ove" />
                            <div>
                                <blockquote>Jeg må få meg ny jobb så jeg kan være med på hver Stirsdag.</blockquote>
                                <span>- Stein Ove, Stirsdag 11.10.2017</span>
                            </div>
                        </li>

                    </ul>
                </div>
            </section>

            <section class="section animBg">
                <div class="section__inner">
                    <h1>Vi løpes! </h1>
                    <p>Hilsen Sky Blazers & Co.</p>
                    <div class="logo-container">
                        <div class="logo-container__inner">
                            <img class="logo" src="media/skyblazerslogo.png" alt="Sky Blazers logo" />
                        </div>
                    </div>
                </div>
            </section>

        </main>

        <script>

            let centerCords = [10.787729707904333, 59.95273140613864];
            let zoomLevel = 11.6;
            let stiLine = [];
            let ready = false;

            fetch('./stirsdagCoordinates.json').then(function (response) {
                return response.json().then(function (data) {
                    coords = data;

                    map.on('load', function () {
                        map.addLayer({
                            "id": "route",
                            "type": "line",
                            "source": {
                                "type": "geojson",
                                "data": {
                                    "type": "Feature",
                                    "properties": {},
                                    "geometry": {
                                        "type": "LineString",
                                        "coordinates": coords
                                    }
                                }
                            },
                            "layout": {
                                "line-join": "round",
                                "line-cap": "round"
                            },
                            "paint": {
                                "line-color": "#ff0000",
                                "line-width": 2
                            }
                        });
                    });
                });
            }).catch(error => {
                console.log(error);
            });

            mapboxgl.accessToken = 'pk.eyJ1IjoiaGFuc2VyaW5vIiwiYSI6ImNqOHprMWUzZjI3N3czM29icjNlOW1lN2oifQ.SBJSmMYduwt6C_MWPMdelQ';

            var map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/mapbox/outdoors-v10',
                center: centerCords,
                zoom: zoomLevel
            });

            var markers = {
                "type": "FeatureCollection",
                "id": "markers",
                "features": [
                    {
                        "type": "Feature",
                        "id": "start",
                        "text": "Disen trikkestopp",
                        "icon": "🏃‍",
                        "properties": {
                            "description": "<h3><strong>Disen trikkestopp</strong></h3><p>Møt opp litt før 18:00, så får du minglet litt.</p><img width=\"300\" src=\"./media/mapPics/disen.jpg\">"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                10.801359,
                                59.950604
                            ],
                        }
                    },
                    {
                        "type": "Feature",
                        "id": "end",
                        "text": "Kjelsås trikkestasjon",
                        "icon": "🏁",
                        "properties": {
                            "description": "<h3><strong>Kjelsås</strong></h3><p>Noen stikker hjem mens andre tar trikken ned til <br /> Peloton og tar en øl og pizza.</p><img width=\"300\" src=\"./media/mapPics/kjelsas.jpg\">"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                10.783729,
                                59.962675
                            ]
                        }
                    },
                    {
                        "type": "Feature",
                        "id": "",
                        "text": "Peloton",
                        "icon": "🍕",
                        "properties": {
                            "description": "<h3><strong>Pizza og pils på <a href=\"http://pelotonoslo.no/\" target=\"_blank\">Peloton</a></strong></h3><img width=\"300\" src=\"./media/mapPics/peloton.jpg\">"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                                10.7543495,
                                59.9174939
                            ]
                        }
                    }
                ]
            };

            markers.features.forEach(function (marker) {
                // create a DOM element for the marker
                var el = document.createElement('div');
                el.className = 'marker';
                el.innerHTML = marker.icon;
                el.style.fontSize = "2.5rem";
                el.style.width = '3rem';
                el.style.height = '3rem';
                el.style.lineHeight = '1';

                el.addEventListener('click', function (e) {
                    popup.setLngLat(marker.geometry.coordinates)
                        .setHTML(marker.properties.description)
                        .addTo(map);
                });

                el.addEventListener('mouseenter', function () {
                    map.getCanvas().style.cursor = 'pointer';
                });

                el.addEventListener('mouseleave', function () {
                    map.getCanvas().style.cursor = '';
                });

                // add marker to map
                new mapboxgl.Marker(el)
                    .setLngLat(marker.geometry.coordinates)
                    .addTo(map);
            });

            map.on('click', function (e) {
                console.log(popup);
                if(popup){}
                //popup.remove();
            });

            var popup = new mapboxgl.Popup({
                closeButton: true,
                closeOnClick: false
            });

        </script>


    </body>

</html>